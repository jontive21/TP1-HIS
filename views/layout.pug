//- views/layout.pug

doctype html
html(lang="es")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title Sistema Hospitalario HIS
    link(rel="stylesheet" href="/styles/style.css")
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css")    
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css")    

  body
    header
      .navbar.navbar-expand-lg.navbar-dark.bg-primary.shadow-sm
        .container-fluid
          a.navbar-brand(href="/") 
            i.bi.bi-hospital-fill.me-2
            | Sistema HIS - Admisión y Recepción
          
          // Menú de navegación
          ul.navbar-nav.ms-auto.mb-2.mb-lg-0
            li.nav-item
              a.nav-link(href="/dashboard") Dashboard
            
            // Corrección importante: Verifica la ruta exacta
            li.nav-item
              a.nav-link(href="/admisiones") Admisiones  // Asegúrate que esta ruta coincida con tu enrutamiento
            
            if user
              li.nav-item
                a.nav-link(href="/logout") 
                  i.bi.bi-box-arrow-right.me-1
                  | Cerrar Sesión
            else
              li.nav-item
                a.nav-link(href="/login") Iniciar Sesión

    main.container.my-5
      //- Mostrar mensajes flash - IMPORTANTE: Cambio en el orden
      if success
        .alert.alert-success.alert-dismissible.fade.show(role="alert")
          = success
          button.btn-close(type="button" data-bs-dismiss="alert" aria-label="Close")
      
      if error
        .alert.alert-danger.alert-dismissible.fade.show(role="alert")
          = error
          button.btn-close(type="button" data-bs-dismiss="alert" aria-label="Close")

      block content

    footer.footer.bg-light.text-center.py-3.mt-5
      .container
        p.mb-0 
          i.bi.bi-c-circle.me-1
          | 2025 – HIS - Sistema Hospitalario Integrado
      p.text-muted.small.mb-0 Programación Web II – Desarrollador de Software

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")    
    script(src="/js/main.js")